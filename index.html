<!DOCTYPE html>
<html lang="en">
<head>
    <title>Burrec mos u zemero</title>
    <meta charset="UTF-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="description" content="">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">

    <link href="public/assets/dist/css/app.css" rel="stylesheet">
    <script src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js"></script>
    <style>
        #app {
            position: absolute;
        }

        canvas {
            width: 100%;
            height: 100%;
        }
    </style>
</head>
<body>
<main>
    <header>
        <nav></nav>
    </header>

    <div id="app">
        <div class="container" style="opacity: 0; pointer-events: none; display: none;">
            <the-game :stepping-fields="steppingFields"></the-game>
        </div>

        <vgl-renderer antialias style="height: 100vh; width: 100vw;">
            <vgl-scene>

                <!-- Board -->
                <vgl-box-geometry name="boardGeometry" width=11 height=0.1 depth="11"></vgl-box-geometry>
                <vgl-texture src="resources/board.png" center="0.5 0.5" name="boardTexture"></vgl-texture>
                <vgl-mesh-lambert-material name="boardMaterial" map="boardTexture"></vgl-mesh-lambert-material>
                <vgl-mesh geometry="boardGeometry" material="boardMaterial" :position="board.position"></vgl-mesh>

                <!-- Stepping Fields -->
                <vgl-cylinder-geometry name="fieldGeometry"
                                       radius-top=0.45
                                       radius-bottom=0.45
                                       height=0.1
                                       :radial-segments=store.settings.quality
                ></vgl-cylinder-geometry>
                <vgl-mesh-lambert-material name="fieldMaterial"></vgl-mesh-lambert-material>
                <vgl-mesh v-for="(field, index) in store.fields"
                          :key="`field-${index}`"
                          :position="`${field.x} 0 ${field.z}`"
                          geometry="fieldGeometry" material="fieldMaterial"
                ></vgl-mesh>

                <!-- Home Fields -->
                <span v-for="(player, playerIndex) in store.players">
                    <vgl-mesh-lambert-material :name="`fieldMaterial-${playerIndex}`"
                                               :color="`${store.homeFields[playerIndex ].color}`"
                    ></vgl-mesh-lambert-material>

                    <vgl-mesh v-for="(field, index) in store.homeFields[playerIndex ].fields"
                              :key="`home-field-${index}`"
                              :material="`fieldMaterial-${playerIndex}`"
                              :position="`${field.x} 0 ${field.z}`"
                              geometry="fieldGeometry"
                    ></vgl-mesh>
                </span>


                <!-- Home Fields -->
                <span v-for="(player, playerIndex) in store.players">
                    <vgl-mesh-lambert-material :name="`fieldMaterial-${playerIndex}`"
                                               :color="`${store.homeFields[playerIndex ].color}`"
                    ></vgl-mesh-lambert-material>
                    <vgl-mesh v-for="(field, index) in store.targetFields[playerIndex ].fields"
                              :key="`home-field-${index}`"
                              :material="`fieldMaterial-${playerIndex}`"
                              :position="`${field.x} 0.0${index} ${field.z}`"
                              geometry="fieldGeometry"
                    ></vgl-mesh>
                </span>


                <!-- Pawns -->
                <vgl-cylinder-geometry name="pawnBodyGeometry"
                                       radius-top=0
                                       radius-bottom=0.3
                                       height=1
                                       :radial-segments=store.settings.quality
                ></vgl-cylinder-geometry>

                <vgl-sphere-geometry name="pawnHeadGeometry"
                                       radius=0.2
                                     :width-segments=store.settings.quality
                                     :height-segments=store.settings.quality
                ></vgl-sphere-geometry>

                <span v-for="(player, playerIndex) in store.players">
                    <vgl-mesh-lambert-material :name="`fieldMaterial-${playerIndex}`"
                                               :color="`${store.homeFields[playerIndex ].color}`"
                    ></vgl-mesh-lambert-material>

                    <vgl-mesh v-for="(field, index) in store.homeFields[playerIndex ].fields"
                              :key="`home-field-${index}`"
                              :material="`fieldMaterial-${playerIndex}`"
                              :position="`${field.x} 0.6 ${field.z}`"
                              geometry="pawnBodyGeometry"
                    ></vgl-mesh>
                    <vgl-mesh v-for="(field, index) in store.homeFields[playerIndex ].fields"
                              :key="`home-field-1-${index}`"
                              :material="`fieldMaterial-${playerIndex}`"
                              :position="`${field.x} 1 ${field.z}`"
                              geometry="pawnHeadGeometry"
                    ></vgl-mesh>
                </span>



                <!-- lighting -->
                <vgl-ambient-light color="#ffffff" intensity="0.1"></vgl-ambient-light>
                <vgl-point-light v-for="(light, index) in pointLights"
                                 :key="`light-${index}`"
                                 :color="light.color"
                                 :intensity="light.intensity"
                                 :distance="light.distance"
                                 :position="light.position"
                ></vgl-point-light>

            </vgl-scene>

            <vgl-perspective-camera :orbit-target="`5 0 5`" :position="`-4 8 -4`"></vgl-perspective-camera>

        </vgl-renderer>


        <aside class="control-panel" style="position: absolute; top:0; z-index: 9; background-color: white;">
            <label>Quality: <input type="range" v-model="store.settings.quality"> {{store.settings.quality}}</label>
            <label>X: <input type="range" v-model="store.homeFields[0].fields[0].x"> {{store.homeFields[0].fields[0].x}}</label>
            <label>Y: <input type="range" v-model="store.homeFields[0].fields[0].y"> {{store.homeFields[0].fields[0].y}}</label>
            <label>Z: <input type="range" v-model="store.homeFields[0].fields[0].z"> {{store.homeFields[0].fields[0].z}}</label>
        </aside>


    </div>
    <footer></footer>
</main>
<script src="public/assets/dist/js/app.js"></script>
</body>
</html>